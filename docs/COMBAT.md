# SystÃ¨me de combat - Adventure Tome

## Vue d'ensemble

Le systÃ¨me de combat dans "Le jeu dont tu es le hÃ©ro" est basÃ© sur des lancers de dÃ©s et la comparaison de Forces d'Attaque.

## Les rÃ¨gles de base

### 1. Les talents

Chaque combattant (personnage ou adversaire) possÃ¨de deux caractÃ©ristiques principales pour le combat :

- **HABILETÃ‰** : Adresse au combat, compÃ©tence martiale
- **ENDURANCE** : Points de vie, capacitÃ© Ã  encaisser les coups

### 2. DÃ©roulement d'un combat

#### Phase 1 : Test pour toucher

**L'attaquant** (tour par tour) :
1. Lancez 2 dÃ©s (rÃ©sultat entre 2 et 12)
2. Comparez avec votre score de **DEXTÃ‰RITÃ‰**
3. **Si 2d6 â‰¤ DEXTÃ‰RITÃ‰** : **L'attaque touche** â†’ Passer Ã  la Phase 2
4. **Si 2d6 > DEXTÃ‰RITÃ‰** : **L'attaque rate** â†’ Passer au prochain round

#### Phase 2 : Calcul des dÃ©gÃ¢ts (si touchÃ©)

1. Lancez 1 dÃ© (rÃ©sultat entre 1 et 6)
2. **DÃ©gÃ¢ts = 1 (base) + 1d6 + Points de dommage de l'arme**
3. Exemple : 1 + 4 (dÃ©) + 5 (arme) = **10 points de dÃ©gÃ¢ts**

#### Phase 3 : Application des dÃ©gÃ¢ts

1. **DÃ©duisez les dÃ©gÃ¢ts** des Points de Vie du dÃ©fenseur
2. Si les Points de Vie tombent Ã  **0 ou moins** : le combattant est **vaincu**

#### Phase 4 : Nouvel assaut

1. **Alternez l'attaquant** : si c'Ã©tait vous, c'est maintenant l'adversaire (et inversement)
2. Recommencez les phases 1, 2 et 3 avec le nouvel attaquant
3. Continuez ainsi jusqu'Ã  ce que :
   - Les **Points de Vie** de l'adversaire tombent Ã  **0 ou moins** â†’ **VICTOIRE**
   - Vos **Points de Vie** tombent Ã  **0 ou moins** â†’ **DÃ‰FAITE** (gÃ©nÃ©ralement mort)
   - Le livre vous offre une option de **FUITE** (selon le paragraphe)

## Options de combat avancÃ©es

### Fuite

Certains combats permettent de **fuir** :
- Le livre vous indiquera si la fuite est possible
- Vous perdez automatiquement **2 Points de Vie** en fuyant
- Rendez-vous au paragraphe indiquÃ© pour fuir

## Combats multiples

### Affronter plusieurs adversaires

Lorsque vous affrontez **plusieurs crÃ©atures en mÃªme temps** :

#### MÃ©thode 1 : Combat sÃ©parÃ©
- Combattez-les **l'une aprÃ¨s l'autre**
- Suivez l'ordre indiquÃ© dans le livre

#### MÃ©thode 2 : Combat simultanÃ©
- Calculez la Force d'Attaque de **chaque adversaire** sÃ©parÃ©ment
- Calculez **votre** Force d'Attaque (une seule fois)
- Comparez votre FA avec celle de chaque adversaire
- Vous subissez **les dÃ©gÃ¢ts de tous les adversaires** qui vous battent lors de cet assaut
- Vous ne blessez **qu'un seul adversaire** (celui dÃ©signÃ© dans le livre ou celui avec la FA la plus faible)

### Modificateurs de combat

### HABILETÃ‰ et armes

Votre Force d'Attaque dÃ©pend de :
- **HABILETÃ‰** : Score de combat de base
- **ARME Ã‰QUIPÃ‰E** : Points d'attaque de l'arme utilisÃ©e
- **Modificateurs situationnels** (voir ci-dessous)

**Formule complÃ¨te** : Force d'Attaque = 2d6 + HABILETÃ‰ + Points d'attaque de l'arme + Modificateurs

### Situations spÃ©ciales

Certaines situations peuvent **modifier temporairement** votre Force d'Attaque :
- **Combattre dans le noir** : Malus possible
- **Arme brisÃ©e** : Perte des points d'attaque de l'arme
- **DÃ©sarmÃ©** : Combattre sans arme (0 points d'attaque)
- **Arme magique** : Bonus supplÃ©mentaires aux points d'attaque

âš ï¸ Ces modificateurs sont **temporaires** et ne changent pas votre HabiletÃ© initiale.

### Bonus et malus
### Situation
Vous (DEXTÃ‰RITÃ‰ 7, PV 32/32, CHANCE 5) avec une **Ã‰pÃ©e longue (5 points de dommage)** affrontez un **GOBELIN** (DEXTÃ‰RITÃ‰ 6, PV 15/15, Arme 2 pts).

### Round 1 - Vous attaquez
1. **Lancer pour toucher** : ğŸ²ğŸ² = 5 â‰¤ 7 (DEX) â†’ **TouchÃ© !**
2. **Lancer de dÃ©gÃ¢ts** : ğŸ² = 4
3. **DÃ©gÃ¢ts** : 1 + 4 + 5 (Ã‰pÃ©e) = **10 points**
4. Le Gobelin perd 10 PV â†’ PV : 15 - 10 = **5**

### Round 2 - Le Gobelin attaque
1. **Lancer pour toucher** : ğŸ²ğŸ² = 8 > 6 (DEX) â†’ **RatÃ© !**
2. Aucun dÃ©gÃ¢t

### Round 3 - Vous attaquez
1. **Lancer pour toucher** : ğŸ²ğŸ² = 6 â‰¤ 7 (DEX) â†’ **TouchÃ© !**
2. **Lancer de dÃ©gÃ¢ts** : ğŸ² = 2
3. **DÃ©gÃ¢ts** : 1 + 2 + 5 (Ã‰pÃ©e) = **8 points**
4. Le Gobelin perd 8 PV â†’ PV : 5 - 8 = **-3** (mort)

### ğŸ‰ VICTOIRE !
- Votre Ã©tat final : DEXTÃ‰RITÃ‰ 7, PV 32/32, CHANCE 5, Ã‰pÃ©e longue (5 pts)
- Vous pouvez continuer votre aventure au paragraphe indiquÃ©
### Assaut 4
1. **Votre lancer** : ğŸ²ğŸ² = 6 + 10 = **16**
2. **Lancer du Gobelin** : ğŸ²ğŸ² = 4 + 6 = **10**
3. **RÃ©sultat** : 16 > 10 â†’ **Vous gagnez l'assaut**
4. Le Gobelin perd 2 points â†’ ENDURANCE : 1 - 2 = **-1** (mort)

### ğŸ‰ VICTOIRE !
- Votre Ã©tat final : HABILETÃ‰ 10, ENDURANCE 19, CHANCE 8
- Vous pouvez continuer votre aventure au paragraphe indiquÃ©

## Interface de combat (Application)

### Affichage recommandÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        âš”ï¸ COMBAT EN COURS âš”ï¸         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        âš”ï¸ COMBAT EN COURS âš”ï¸         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  VOUS                    GOBELIN    â”‚
â”‚  DEX: 7                  DEX: 6     â”‚
â”‚  PV: 32/32              PV: 15/15   â”‚
â”‚  Arme: Ã‰pÃ©e (5 pts)     Arme: 2 pts â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           ROUND NÂ°1                 â”‚
â”‚         Attaquant: VOUS             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Test toucher:    [LANCER DÃ‰S]     â”‚
â”‚  (2d6 â‰¤ DEX 7)                     â”‚
â”‚                                     â”‚
â”‚  Si touchÃ©:                         â”‚
â”‚  DÃ©gÃ¢ts: 1 + 1d6 + 5 (Arme)       â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [FUIR (-2 PV)]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```**Affichage en temps rÃ©el** :
   - Statistiques des deux combattants
   - NumÃ©ro de l'assaut en cours
   - Historique des assauts prÃ©cÃ©dents

2. **Actions disponibles** :
   - Bouton "Lancer les dÃ©s" (automatique pour adversaire)
   - Bouton "Tentez votre Chance" (aprÃ¨s rÃ©solution d'un assaut)
   - Bouton "Fuir" (si autorisÃ©)

3. **Feedback visuel** :
   - Animation des dÃ©s
   - Indication du gagnant de l'assaut (vert/rouge)
   - DÃ©gÃ¢ts infligÃ©s/subis avec animation
   - Barres de vie (Endurance)

4. **Historique** :
   - Liste dÃ©roulante des assauts prÃ©cÃ©dents
   - RÃ©sultats de chaque lancer
   - Utilisation de la Chance

5. **Fin de combat** :
   - Ã‰cran de victoire/dÃ©faite
   - RÃ©sumÃ© du combat
   - Bouton pour continuer l'aventure

## Calculs automatiques

### Algorithme de combat

```typescript
```typescript
interface CombatRound {
  roundNumber: number;
  attacker: 'player' | 'enemy';
  
  // Test pour toucher
  hitDiceRoll: number;           // 2d6
  hitSuccess: boolean;           // hitDiceRoll â‰¤ DEXTÃ‰RITÃ‰
  
  // Si touchÃ©, calcul des dÃ©gÃ¢ts
  damageDiceRoll?: number;       // 1d6
  weaponDamage?: number;         // Points de dommage de l'arme
  totalDamage?: number;          // 1 + 1d6 + weaponDamage
  
  playerEnduranceAfter: number;
  enemyEnduranceAfter: number;
}

function resolveCombatRound(
  roundNumber: number,
  attacker: 'player' | 'enemy',
  playerDexterite: number,
  playerEndurance: number,
  playerWeaponDamage: number,
  enemy: Enemy,
  enemyEndurance: number
): CombatRound {
  const isPlayerAttacking = attacker === 'player';
  const attackerDex = isPlayerAttacking ? playerDexterite : enemy.dexterite;
  const attackerWeapon = isPlayerAttacking ? playerWeaponDamage : enemy.attackPoints;
  
  // 1. Test pour toucher (2d6 â‰¤ DEXTÃ‰RITÃ‰)
  const hitRoll = rollTwoDice();
  const hitSuccess = hitRoll <= attackerDex;
  
  let playerEnduranceAfter = playerEndurance;
  let enemyEnduranceAfter = enemyEndurance;
  let totalDamage: number | undefined;
  let damageRoll: number | undefined;
  
  // 2. Si touchÃ©, calculer les dÃ©gÃ¢ts (1 + 1d6 + arme)
  if (hitSuccess) {
    damageRoll = rollOneDie();
    totalDamage = 1 + damageRoll + attackerWeapon;
    
    // Appliquer les dÃ©gÃ¢ts
    if (isPlayerAttacking) {
      enemyEnduranceAfter = Math.max(0, enemyEndurance - totalDamage);
    } else {
      playerEnduranceAfter = Math.max(0, playerEndurance - totalDamage);
    }
  }
  
  return {
    roundNumber,
    attacker,
    hitDiceRoll: hitRoll,
    hitSuccess,
    damageDiceRoll: damageRoll,
    weaponDamage: hitSuccess ? attackerWeapon : undefined,
    totalDamage,
    playerEnduranceAfter,
    enemyEnduranceAfter
  };
}
function testLuck(currentLuck: number): boolean {
  const roll = rollTwoDice();
  return roll <= currentLuck;
}

function applyLuckToCombat(
  round: CombatRound,
  isLucky: boolean,
  damageType: 'dealt' | 'taken'
): number {
  const baseDamage = round.damageDealt;
  
  if (damageType === 'dealt') {
    // Vous avez blessÃ© l'adversaire
    return isLucky ? baseDamage + 1 : baseDamage - 1;
  } else {
    // Vous avez Ã©tÃ© blessÃ©
    return isLucky ? baseDamage - 1 : baseDamage + 1;
  }
}
```

## Cas spÃ©ciaux

### Mort instantanÃ©e
Certains adversaires ou situations peuvent causer la mort instantanÃ©e (Endurance = 0 immÃ©diatement).

### CrÃ©atures immunisÃ©es
Certaines crÃ©atures ne peuvent Ãªtre blessÃ©es que par des armes magiques ou des objets spÃ©ciaux.

## Conseils stratÃ©giques

1. **Choisissez la bonne arme** : Ã‰quipez l'arme avec le plus de points de dommage
2. **Ã‰valuez la DEXTÃ‰RITÃ‰** : Plus elle est Ã©levÃ©e, plus vous avez de chances de toucher
3. **Armes puissantes** : Les points de dommage augmentent les dÃ©gÃ¢ts, pas la chance de toucher
4. **Fuyez si nÃ©cessaire** : Si l'adversaire a trop de Points de Vie ou une DEXTÃ‰RITÃ‰ Ã©levÃ©e, parfois fuir (-2 PV) est la meilleure option
5. **Surveillez vos Points de Vie** : Utilisez les boulons pour acheter des objets de soin
6. **Premier attaquant** : Choisissez bien qui attaque en premier, cela peut faire la diffÃ©rence

1. **Ã‰valuez avant de combattre** : VÃ©rifiez si l'adversaire a une HabiletÃ© trÃ¨s Ã©levÃ©e
2. **GÃ©rez votre Chance** : Ne l'utilisez pas trop vite, gardez-en pour les moments critiques
3. **Fuyez si nÃ©cessaire** : Parfois, 2 points de dÃ©gÃ¢ts valent mieux qu'une mort certaine
4. **Surveillez votre Endurance** : Mangez des provisions avant d'atteindre un niveau critique
5. **Objets magiques** : Utilisez-les au bon moment pour maximiser leur effet
