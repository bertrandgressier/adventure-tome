# SystÃ¨me de combat - Adventure Hero

## Vue d'ensemble

Le systÃ¨me de combat dans "Le jeu dont tu es le hÃ©ro" est basÃ© sur des lancers de dÃ©s et la comparaison de Forces d'Attaque.

## Les rÃ¨gles de base

### 1. Les talents

Chaque combattant (personnage ou adversaire) possÃ¨de deux caractÃ©ristiques principales pour le combat :

- **HABILETÃ‰** : Adresse au combat, compÃ©tence martiale
- **ENDURANCE** : Points de vie, capacitÃ© Ã  encaisser les coups

### 2. DÃ©roulement d'un combat

#### Phase 1 : Calcul des Forces d'Attaque

**Pour votre personnage :**
1. Lancez 2 dÃ©s (rÃ©sultat entre 2 et 12)
2. Ajoutez votre score d'HABILETÃ‰ actuel
3. **Ajoutez les points d'attaque de votre arme Ã©quipÃ©e**
4. **Total = FORCE D'ATTAQUE du personnage**

**Pour l'adversaire :**
1. Lancez 2 dÃ©s (rÃ©sultat entre 2 et 12)
2. Ajoutez son score d'HABILETÃ‰ (indiquÃ© dans le livre)
3. Ajoutez ses points d'attaque (si indiquÃ©)
4. **Total = FORCE D'ATTAQUE de l'adversaire**

#### Phase 2 : Comparaison et rÃ©solution

1. Comparez les deux Forces d'Attaque

2. **DÃ©termination du vainqueur de l'assaut :**
   - Si votre Force d'Attaque > Force d'Attaque adverse : **VOUS gagnez l'assaut**
   - Si Force d'Attaque adverse > votre Force d'Attaque : **L'ADVERSAIRE gagne l'assaut**
   - Si les Forces d'Attaque sont **Ã©gales** : **AUCUN dÃ©gÃ¢t** (vous esquivez tous les deux)

3. **Application des dÃ©gÃ¢ts :**
   - Le perdant de l'assaut perd **2 points d'ENDURANCE**
   - DÃ©duisez immÃ©diatement ces points du total d'Endurance

#### Phase 3 : Nouvel assaut

1. Recommencez les phases 1 et 2
2. Continuez ainsi jusqu'Ã  ce que :
   - L'ENDURANCE de l'adversaire tombe Ã  **0 ou moins** â†’ **VICTOIRE**
   - Votre ENDURANCE tombe Ã  **0 ou moins** â†’ **DÃ‰FAITE** (gÃ©nÃ©ralement mort)
   - Le livre vous offre une option de **FUITE** (selon le paragraphe)

## Options de combat avancÃ©es

### Tentez votre Chance en combat

Vous pouvez **Tenter votre Chance** pour influencer le rÃ©sultat d'un assaut :

#### Quand l'utiliser ?

1. **AprÃ¨s avoir blessÃ© un adversaire** (pour infliger plus de dÃ©gÃ¢ts)
2. **AprÃ¨s avoir Ã©tÃ© blessÃ©** (pour rÃ©duire les dÃ©gÃ¢ts subis)

#### Comment Ã§a marche ?

**Si vous blessez l'adversaire :**
- Lancez 2 dÃ©s
- Si rÃ©sultat â‰¤ votre CHANCE actuelle â†’ **Chanceux**
  - DÃ©gÃ¢ts infligÃ©s : **3 points** au lieu de 2 (dÃ©gÃ¢t supplÃ©mentaire)
- Si rÃ©sultat > votre CHANCE actuelle â†’ **Malchanceux**
  - DÃ©gÃ¢ts infligÃ©s : **1 point** seulement au lieu de 2 (coup moins efficace)

**Si vous Ãªtes blessÃ© :**
- Lancez 2 dÃ©s
- Si rÃ©sultat â‰¤ votre CHANCE actuelle â†’ **Chanceux**
  - DÃ©gÃ¢ts subis : **1 point** au lieu de 2 (vous parez partiellement)
- Si rÃ©sultat > votre CHANCE actuelle â†’ **Malchanceux**
  - DÃ©gÃ¢ts subis : **3 points** au lieu de 2 (le coup est plus grave)

âš ï¸ **Important :** AprÃ¨s chaque Tentez votre Chance, rÃ©duisez votre score de CHANCE de **1 point**.

### Fuite

Certains combats permettent de **fuir** aprÃ¨s un certain nombre d'assauts :
- Le livre vous indiquera si la fuite est possible
- GÃ©nÃ©ralement, vous pouvez fuir aprÃ¨s le premier assaut
- L'adversaire vous inflige automatiquement **2 points de dÃ©gÃ¢ts** dans le dos
- Rendez-vous au paragraphe indiquÃ© pour fuir

## Combats multiples

### Affronter plusieurs adversaires

Lorsque vous affrontez **plusieurs crÃ©atures en mÃªme temps** :

#### MÃ©thode 1 : Combat sÃ©parÃ©
- Combattez-les **l'une aprÃ¨s l'autre**
- Suivez l'ordre indiquÃ© dans le livre

#### MÃ©thode 2 : Combat simultanÃ©
- Calculez la Force d'Attaque de **chaque adversaire** sÃ©parÃ©ment
- Calculez **votre** Force d'Attaque (une seule fois)
- Comparez votre FA avec celle de chaque adversaire
- Vous subissez **les dÃ©gÃ¢ts de tous les adversaires** qui vous battent lors de cet assaut
- Vous ne blessez **qu'un seul adversaire** (celui dÃ©signÃ© dans le livre ou celui avec la FA la plus faible)

### Modificateurs de combat

### HABILETÃ‰ et armes

Votre Force d'Attaque dÃ©pend de :
- **HABILETÃ‰** : Score de combat de base
- **ARME Ã‰QUIPÃ‰E** : Points d'attaque de l'arme utilisÃ©e
- **Modificateurs situationnels** (voir ci-dessous)

**Formule complÃ¨te** : Force d'Attaque = 2d6 + HABILETÃ‰ + Points d'attaque de l'arme + Modificateurs

### Situations spÃ©ciales

Certaines situations peuvent **modifier temporairement** votre Force d'Attaque :
- **Combattre dans le noir** : Malus possible
- **Arme brisÃ©e** : Perte des points d'attaque de l'arme
- **DÃ©sarmÃ©** : Combattre sans arme (0 points d'attaque)
- **Arme magique** : Bonus supplÃ©mentaires aux points d'attaque

âš ï¸ Ces modificateurs sont **temporaires** et ne changent pas votre HabiletÃ© initiale.

### Bonus et malus
### Situation
Vous (HABILETÃ‰ 10, ENDURANCE 20, CHANCE 9) avec une **Ã‰pÃ©e (5 points d'attaque)** affrontez un **GOBELIN** (HABILETÃ‰ 6, ENDURANCE 5, Points d'attaque 2).

### Assaut 1
1. **Votre lancer** : ðŸŽ²ðŸŽ² = 7 + 10 (HAB) + 5 (Ã‰pÃ©e) = **22** (Force d'Attaque)
2. **Lancer du Gobelin** : ðŸŽ²ðŸŽ² = 5 + 6 (HAB) + 2 (Arme) = **13** (Force d'Attaque)
3. **RÃ©sultat** : 22 > 13 â†’ **Vous gagnez l'assaut**
4. Le Gobelin perd 2 points â†’ ENDURANCE : 5 - 2 = **3**

### Assaut 2
1. **Votre lancer** : ðŸŽ²ðŸŽ² = 4 + 10 + 5 = **19**
2. **Lancer du Gobelin** : ðŸŽ²ðŸŽ² = 9 + 6 + 2 = **17**
3. **RÃ©sultat** : 19 > 17 â†’ **Vous gagnez l'assaut**
4. Le Gobelin perd 2 points â†’ ENDURANCE : 3 - 2 = **1**

### Assaut 3
1. **Votre lancer** : ðŸŽ²ðŸŽ² = 3 + 10 + 5 = **18**
2. **Lancer du Gobelin** : ðŸŽ²ðŸŽ² = 10 + 6 + 2 = **18**
3. **RÃ©sultat** : 18 = 18 â†’ **Ã‰galitÃ©, aucun dÃ©gÃ¢t**

### Assaut 4
1. **Votre lancer** : ðŸŽ²ðŸŽ² = 6 + 10 + 5 = **21**
2. **Lancer du Gobelin** : ðŸŽ²ðŸŽ² = 4 + 6 + 2 = **12**
3. **RÃ©sultat** : 21 > 12 â†’ **Vous gagnez l'assaut**
4. Le Gobelin perd 2 points â†’ ENDURANCE : 1 - 2 = **-1** (mort)

### ðŸŽ‰ VICTOIRE !
- Votre Ã©tat final : HABILETÃ‰ 10, ENDURANCE 20, CHANCE 9, Ã‰pÃ©e (5 pts)
- Vous pouvez continuer votre aventure au paragraphe indiquÃ©
### Assaut 4
1. **Votre lancer** : ðŸŽ²ðŸŽ² = 6 + 10 = **16**
2. **Lancer du Gobelin** : ðŸŽ²ðŸŽ² = 4 + 6 = **10**
3. **RÃ©sultat** : 16 > 10 â†’ **Vous gagnez l'assaut**
4. Le Gobelin perd 2 points â†’ ENDURANCE : 1 - 2 = **-1** (mort)

### ðŸŽ‰ VICTOIRE !
- Votre Ã©tat final : HABILETÃ‰ 10, ENDURANCE 19, CHANCE 8
- Vous pouvez continuer votre aventure au paragraphe indiquÃ©

## Interface de combat (Application)

### Affichage recommandÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        âš”ï¸ COMBAT EN COURS âš”ï¸         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        âš”ï¸ COMBAT EN COURS âš”ï¸         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  VOUS                    GOBELIN    â”‚
â”‚  HAB: 10                 HAB: 6     â”‚
â”‚  END: 20/20             END: 5/5    â”‚
â”‚  Arme: Ã‰pÃ©e (5 pts)     Arme: 2 pts â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           ASSAUT NÂ°1                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Votre lancer:     [LANCER DÃ‰S]    â”‚
â”‚  Force d'Attaque:  --               â”‚
â”‚  (2d6 + HAB 10 + Arme 5)           â”‚
â”‚                                     â”‚
â”‚  Adversaire:       (auto)           â”‚
â”‚  Force d'Attaque:  --               â”‚
â”‚  (2d6 + HAB 6 + Arme 2)            â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [TENTEZ VOTRE CHANCE]  [FUIR]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```**Affichage en temps rÃ©el** :
   - Statistiques des deux combattants
   - NumÃ©ro de l'assaut en cours
   - Historique des assauts prÃ©cÃ©dents

2. **Actions disponibles** :
   - Bouton "Lancer les dÃ©s" (automatique pour adversaire)
   - Bouton "Tentez votre Chance" (aprÃ¨s rÃ©solution d'un assaut)
   - Bouton "Fuir" (si autorisÃ©)

3. **Feedback visuel** :
   - Animation des dÃ©s
   - Indication du gagnant de l'assaut (vert/rouge)
   - DÃ©gÃ¢ts infligÃ©s/subis avec animation
   - Barres de vie (Endurance)

4. **Historique** :
   - Liste dÃ©roulante des assauts prÃ©cÃ©dents
   - RÃ©sultats de chaque lancer
   - Utilisation de la Chance

5. **Fin de combat** :
   - Ã‰cran de victoire/dÃ©faite
   - RÃ©sumÃ© du combat
   - Bouton pour continuer l'aventure

## Calculs automatiques

### Algorithme de combat

```typescript
```typescript
interface CombatRound {
  roundNumber: number;
  playerDiceRoll: number;
  playerAttackStrength: number;
  playerWeaponPoints: number;  // Points d'attaque de l'arme
  enemyDiceRoll: number;
  enemyAttackStrength: number;
  enemyWeaponPoints: number;
  winner: 'player' | 'enemy' | 'draw';
  damageDealt: number;
  luckUsed: boolean;
  luckResult?: 'lucky' | 'unlucky';
  adjustedDamage?: number;
}

function resolveCombatRound(
  playerSkill: number,
  playerStamina: number,
  playerWeaponPoints: number,  // Nouveau paramÃ¨tre
  enemySkill: number,
  enemyStamina: number,
  enemyWeaponPoints: number    // Nouveau paramÃ¨tre
): CombatRound {
  // 1. Lancer les dÃ©s
  const playerRoll = rollTwoDice(); // 2d6
  const enemyRoll = rollTwoDice();
  
  // 2. Calculer Forces d'Attaque (avec armes)
  const playerAS = playerRoll + playerSkill + playerWeaponPoints;
  const enemyAS = enemyRoll + enemySkill + enemyWeaponPoints;
  
  // 3. DÃ©terminer le gagnant
  let winner: 'player' | 'enemy' | 'draw';
  let damageDealt = 0;
  
  if (playerAS > enemyAS) {
    winner = 'player';
    damageDealt = 2;
    enemyStamina -= damageDealt;
  } else if (enemyAS > playerAS) {
    winner = 'enemy';
    damageDealt = 2;
    playerStamina -= damageDealt;
  } else {
    winner = 'draw';
  }
  
  return {
    roundNumber,
    playerDiceRoll: playerRoll,
    playerAttackStrength: playerAS,
    playerWeaponPoints,
    enemyDiceRoll: enemyRoll,
    enemyAttackStrength: enemyAS,
    enemyWeaponPoints,
    winner,
    damageDealt,
    luckUsed: false
  };
}
function testLuck(currentLuck: number): boolean {
  const roll = rollTwoDice();
  return roll <= currentLuck;
}

function applyLuckToCombat(
  round: CombatRound,
  isLucky: boolean,
  damageType: 'dealt' | 'taken'
): number {
  const baseDamage = round.damageDealt;
  
  if (damageType === 'dealt') {
    // Vous avez blessÃ© l'adversaire
    return isLucky ? baseDamage + 1 : baseDamage - 1;
  } else {
    // Vous avez Ã©tÃ© blessÃ©
    return isLucky ? baseDamage - 1 : baseDamage + 1;
  }
}
```

## Cas spÃ©ciaux

### Mort instantanÃ©e
Certains adversaires ou situations peuvent causer la mort instantanÃ©e (Endurance = 0 immÃ©diatement).

### CrÃ©atures immunisÃ©es
Certaines crÃ©atures ne peuvent Ãªtre blessÃ©es que par des armes magiques ou des objets spÃ©ciaux.

## Conseils stratÃ©giques

1. **Choisissez la bonne arme** : Ã‰quipez l'arme avec le plus de points d'attaque
2. **Ã‰valuez avant de combattre** : Comparez votre Force d'Attaque totale (HAB + Arme) avec celle de l'adversaire
3. **GÃ©rez votre Chance** : Ne l'utilisez pas trop vite, gardez-en pour les moments critiques
4. **Fuyez si nÃ©cessaire** : Si l'adversaire a beaucoup plus de points d'attaque, parfois fuir est la meilleure option
5. **Surveillez votre Endurance** : RÃ©cupÃ©rez selon les rÃ¨gles du livre avant d'atteindre un niveau critique
6. **Objets magiques** : Certaines armes magiques ont des points d'attaque trÃ¨s Ã©levÃ©s
7. **Arme cassÃ©e** : Ayez toujours une arme de secours dans votre inventaire

1. **Ã‰valuez avant de combattre** : VÃ©rifiez si l'adversaire a une HabiletÃ© trÃ¨s Ã©levÃ©e
2. **GÃ©rez votre Chance** : Ne l'utilisez pas trop vite, gardez-en pour les moments critiques
3. **Fuyez si nÃ©cessaire** : Parfois, 2 points de dÃ©gÃ¢ts valent mieux qu'une mort certaine
4. **Surveillez votre Endurance** : Mangez des provisions avant d'atteindre un niveau critique
5. **Objets magiques** : Utilisez-les au bon moment pour maximiser leur effet
